(function(t){function e(e){for(var s,o,c=e[0],r=e[1],l=e[2],u=0,m=[];u<c.length;u++)o=c[u],n[o]&&m.push(n[o][0]),n[o]=0;for(s in r)Object.prototype.hasOwnProperty.call(r,s)&&(t[s]=r[s]);d&&d(e);while(m.length)m.shift()();return i.push.apply(i,l||[]),a()}function a(){for(var t,e=0;e<i.length;e++){for(var a=i[e],s=!0,c=1;c<a.length;c++){var r=a[c];0!==n[r]&&(s=!1)}s&&(i.splice(e--,1),t=o(o.s=a[0]))}return t}var s={},n={index:0},i=[];function o(e){if(s[e])return s[e].exports;var a=s[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=t,o.c=s,o.d=function(t,e,a){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var s in t)o.d(a,s,function(e){return t[e]}.bind(null,s));return a},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],r=c.push.bind(c);c.push=e,c=c.slice();for(var l=0;l<c.length;l++)e(c[l]);var d=r;i.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"0264":function(t,e,a){"use strict";var s=a("897f"),n=a.n(s);n.a},"03b5":function(t,e,a){},"0d1a":function(t,e,a){},"16e9":function(t,e,a){},"173a":function(t,e,a){"use strict";var s=a("cfa2"),n=a.n(s);n.a},"184d":function(t,e,a){},"199c":function(t,e,a){"use strict";(function(t){t(document).ready(function(){t(".nav-item").click(function(){t(".nav-item").removeClass("active"),t(this).addClass("active")})}),e["a"]={data:function(){return{}},methods:{userInfo:function(){var t=this;this.axios.get("/userInfo").then(function(e){if(1==e.data.code){var a=e.data.data;t.$store.commit("setData",a)}else t.$message("登录出错")}).catch(function(){t.$store.commit("setData",{identity:"tourist"}),t.$message("您正在以游客身份浏览")})},login:function(){localStorage.clear(),window.location.href=this.COMMON.login_location}},mounted:function(){this.userInfo()}}}).call(this,a("1157"))},"1a13":function(t,e,a){"use strict";var s=a("5a07"),n=a.n(s);n.a},"26b2":function(t,e,a){"use strict";var s=a("d258"),n=a.n(s);n.a},"27d6":function(t,e,a){"use strict";var s=a("16e9"),n=a.n(s);n.a},"2cdc":function(t,e,a){"use strict";var s=a("4634"),n=a.n(s);n.a},"2d64":function(t,e,a){"use strict";var s=a("4160"),n=a.n(s);n.a},"2dec":function(t,e,a){"use strict";var s=a("52df"),n=a.n(s);n.a},"309d":function(t,e,a){"use strict";var s=a("a001"),n=a.n(s);n.a},3405:function(t,e,a){"use strict";var s=a("b845"),n=a.n(s);n.a},"40d1":function(t,e,a){},4160:function(t,e,a){},"41d1":function(t,e,a){},"42b3":function(t,e,a){"use strict";var s=a("666c"),n=a.n(s);n.a},4430:function(t,e,a){"use strict";var s,n,i=a("5d10"),o=i["a"],c=a("2877"),r=Object(c["a"])(o,s,n,!1,null,null,null);e["a"]=r.exports},4634:function(t,e,a){},4678:function(t,e,a){var s={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function n(t){var e=i(t);return a(e)}function i(t){var e=s[t];if(!(e+1)){var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}return e}n.keys=function(){return Object.keys(s)},n.resolve=i,t.exports=n,n.id="4678"},"52df":function(t,e,a){},"56d7":function(t,e,a){"use strict";a.r(e);a("a481"),a("6b54");var s=a("e814"),n=a.n(s),i=(a("cadf"),a("551c"),a("f751"),a("097d"),a("2b0e")),o=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"app"}},[a("nav",{staticClass:"navbar navbar-expand-lg navbar-dark bg-primary"},[a("a",{staticClass:"navbar-brand",attrs:{href:"#"}},[t._v("在线小说阅读")]),t._m(0),a("div",{staticClass:"collapse navbar-collapse",attrs:{id:"navbarText"}},[a("ul",{staticClass:"navbar-nav mr-auto"},[a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/home/newPublish",href:"#"}},[t._v("主页")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/home/ranking",href:"#"}},[t._v("排行")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/home/recommend",href:"#"}},[t._v("推书区")])],1),a("li",{staticClass:"nav-item"},[a("router-link",{staticClass:"nav-link",attrs:{to:"/home/customerService",href:"#"}},[t._v("客服")])],1)]),a("span",{staticClass:"navbar-text"},["admin"==t.$store.state.identity?a("el-button",{attrs:{icon:"el-icon-menu"},on:{click:function(e){return t.$router.push("/admin")}}},[t._v("后台管理")]):t._e(),"editor"==t.$store.state.identity||"admin"==t.$store.state.identity?a("el-button",{attrs:{icon:"el-icon-edit"},on:{click:function(e){return t.$router.push("/editor/createNovel")}}},[t._v("创 作")]):t._e(),"tourist"!=t.$store.state.identity?a("el-button",{attrs:{icon:"el-icon-info"},on:{click:function(e){return t.$router.push("/user")}}},[t._v("用户中心")]):t._e(),"tourist"==t.$store.state.identity?a("el-button",{attrs:{type:"danger"},on:{click:t.login}},[t._v("登 录")]):t._e()],1)])]),a("div",{staticClass:"container",attrs:{id:"main"}},[a("transition",[a("router-view")],1)],1)])},c=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("button",{staticClass:"navbar-toggler",attrs:{type:"button","data-toggle":"collapse","data-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"}},[a("span",{staticClass:"navbar-toggler-icon"})])}],r=a("199c"),l=r["a"],d=(a("b3b9"),a("5c64"),a("2877")),u=Object(d["a"])(l,o,c,!1,null,"04598831",null),m=u.exports,f=a("8c4f"),v=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"noFound"}},[t._v("\n  404 NOFOUND 该页面不存在\n")])},h=[],p={},g=p,b=(a("c0fb"),Object(d["a"])(g,v,h,!1,null,"66d597ff",null)),_=b.exports,C=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"home"}},[a("div",{staticClass:"search_bar_box"},[a("div",{staticClass:"search_bar"},[a("el-input",{staticClass:"input-with-select",attrs:{placeholder:"请输入内容"},model:{value:t.key,callback:function(e){t.key=e},expression:"key"}},[a("el-select",{staticStyle:{width:"80px"},attrs:{slot:"prepend",placeholder:"请选择"},slot:"prepend",model:{value:t.select,callback:function(e){t.select=e},expression:"select"}},[a("el-option",{attrs:{label:"书名",value:"book_name"}}),a("el-option",{attrs:{label:"作者",value:"editor_name"}})],1),a("el-button",{attrs:{slot:"append",icon:"el-icon-search"},on:{click:t.search},slot:"append"})],1)],1)]),a("div",{staticClass:"main"},[a("transition",[a("router-view")],1)],1)])},y=[],$={data:function(){return{select:"book_name",key:""}},methods:{search:function(){""!=this.key&&this.$router.push("/home/search?searchWay="+this.select+"&key="+this.key)}}},x=$,k=(a("64b9"),Object(d["a"])(x,C,y,!1,null,"1c8734f4",null)),j=k.exports,w=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"new"}},[a("h4",{staticClass:"title"},[t._v("最新上架")]),a("div",{staticClass:"novel_list row"},[t._l(t.data,function(e){return a("div",{key:e.id,staticClass:"col-md-4"},[a("div",{staticClass:"card"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.cover,expression:"item.cover == ''"}],staticClass:"cover"},[t._v("无封面")]),a("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.cover,expression:"item.cover != ''"}],staticClass:"card-img-top",attrs:{src:e.cover,alt:"Card image cap"}}),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.novelName))]),a("p",{staticClass:"card-text"},[t._v(t._s(t._f("introduction")(e.introduction)))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push("/novel/"+e.id)}}},[t._v("查看详情")])],1)])])}),t.data.length<t.total?a("el-button",{staticStyle:{display:"flex",margin:"0 auto"},attrs:{type:"primary"},on:{click:t.loadMore}},[t._v("加载更多")]):t._e()],2)])},N=[],D=a("75fc"),I={data:function(){return{data:[],page:1,total:0}},methods:{getData:function(){var t=this;this.axios.get("/getNewPublish?page="+this.page).then(function(e){if(1==e.data.code)if(t.total=e.data.data.total,1==t.page)t.data=e.data.data.novelList;else{var a=t.data,s=e.data.data.novelList;t.data=[].concat(Object(D["a"])(a),Object(D["a"])(s))}else t.$message("获取失败")}).catch(function(e){console.log(e),t.$message("服务器连接失败")})},loadMore:function(){this.page++,this.getData()}},mounted:function(){this.getData()}},O=I,S=(a("0264"),Object(d["a"])(O,w,N,!1,null,"adc1297a",null)),T=S.exports,L=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"search"}},[a("h4",[t._v("搜索结果")]),a("div",{staticClass:"main"},[0==t.data.length?a("h3",[t._v("暂无结果")]):t._e(),a("div",{staticClass:"novel_list row"},t._l(t.data,function(e){return a("div",{key:e.id,staticClass:"col-md-4"},[a("div",{staticClass:"card"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.cover,expression:"item.cover == ''"}],staticClass:"cover"},[t._v("无封面")]),a("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.cover,expression:"item.cover != ''"}],staticClass:"card-img-top",attrs:{src:e.cover,alt:"Card image cap"}}),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.novelName))]),a("p",{staticClass:"card-text"},[t._v(t._s(t._f("introduction")(e.introduction)))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push("/novel/"+e.id)}}},[t._v("查看详情")])],1)])])}),0)])])},E=[],M={data:function(){return{data:[]}},methods:{getData:function(){var t=this;this.axios.get("/getSearch",{params:{searchWay:this.$route.query.searchWay,key:this.$route.query.key}}).then(function(e){1==e.data.code?t.data=e.data.data:t.$message("获取失败")}).catch(function(e){console.log(e),t.$message("无法连接服务器")})}},mounted:function(){this.getData()},watch:{"$route.query":function(){this.getData()}}},z=M,B=(a("173a"),Object(d["a"])(z,L,E,!1,null,"7b69634d",null)),U=B.exports,F=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"ranking"}},[a("h4",[t._v("下载量榜")]),a("div",{staticClass:"main"},[a("div",{staticClass:"novel_list row"},t._l(t.downloadNum,function(e){return a("div",{key:e.id,staticClass:"col-md-4"},[a("div",{staticClass:"card"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.cover,expression:"item.cover == ''"}],staticClass:"cover"},[t._v("无封面")]),a("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.cover,expression:"item.cover != ''"}],staticClass:"card-img-top",attrs:{src:e.cover,alt:"Card image cap"}}),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.novelName))]),a("p",{staticClass:"card-text"},[t._v(t._s(t._f("introduction")(e.introduction)))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push("/novel/"+e.id)}}},[t._v("查看详情")])],1)])])}),0)]),a("h4",[t._v("阅读量榜")]),a("div",{staticClass:"main"},[a("div",{staticClass:"novel_list row"},t._l(t.clickNum,function(e){return a("div",{key:e.id,staticClass:"col-md-4"},[a("div",{staticClass:"card"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.cover,expression:"item.cover == ''"}],staticClass:"cover"},[t._v("无封面")]),a("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.cover,expression:"item.cover != ''"}],staticClass:"card-img-top",attrs:{src:e.cover,alt:"Card image cap"}}),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.novelName))]),a("p",{staticClass:"card-text"},[t._v(t._s(t._f("introduction")(e.introduction)))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push("/novel/"+e.id)}}},[t._v("查看详情")])],1)])])}),0)]),a("h4",[t._v("评论榜")]),a("div",{staticClass:"main"},[a("div",{staticClass:"novel_list row"},t._l(t.commentNum,function(e){return a("div",{key:e.id,staticClass:"col-md-4"},[a("div",{staticClass:"card"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.cover,expression:"item.cover == ''"}],staticClass:"cover"},[t._v("无封面")]),a("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.cover,expression:"item.cover != ''"}],staticClass:"card-img-top",attrs:{src:e.cover,alt:"Card image cap"}}),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.novelName))]),a("p",{staticClass:"card-text"},[t._v(t._s(t._f("introduction")(e.introduction)))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push("/novel/"+e.id)}}},[t._v("查看详情")])],1)])])}),0)])])},R=[],P={data:function(){return{downloadNum:[],clickNum:[],commentNum:[]}},methods:{getData:function(){var t=this,e=["downloadNum","clickNum","commentNum"],a=function(a){t.axios.get("/getRanking?sort="+e[a]).then(function(s){1==s.data.code?t[e[a]]=s.data.data:t.$message(e[a]+"数据获取失败")}).catch(function(s){console.log(s),t.$message(e[a]+"数据获取失败，无法连接服务器")})};for(var s in e)a(s)}},mounted:function(){this.getData()}},q=P,Y=(a("e0d6"),Object(d["a"])(q,F,R,!1,null,"45c91606",null)),V=Y.exports,W=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"recommend"}},["tourist"==t.$store.state.identity?a("div",{staticClass:"noRecommed"},[t._v("请您登录后查看推荐")]):t._e(),"tourist"!=t.$store.state.identity?a("div",{staticClass:"title_box"},[a("div",{staticClass:"title"},[t._v("向您推荐：")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-refresh"},on:{click:t.refresh}},[t._v("换一批")])],1):t._e(),a("div",{staticClass:"main"},[a("div",{staticClass:"novel_list row"},t._l(t.data,function(e){return a("div",{key:e.id,staticClass:"col-md-4"},[a("div",{staticClass:"card"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.cover,expression:"item.cover == ''"}],staticClass:"cover"},[t._v("无封面")]),a("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.cover,expression:"item.cover != ''"}],staticClass:"card-img-top",attrs:{src:e.cover,alt:"Card image cap"}}),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.novelName))]),a("p",{staticClass:"card-text"},[t._v(t._s(t._f("introduction")(e.introduction)))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push("/novel/"+e.id)}}},[t._v("查看详情")])],1)])])}),0)])])},A=[],H={data:function(){return{data:[]}},methods:{getData:function(){var t=this;this.axios.get("/getRecommend").then(function(e){1==e.data.code?(t.data=e.data.data,t.$message("获取成功")):t.$message("获取失败")}).catch(function(e){console.log(e),t.$message("服务器连接失败")})},refresh:function(){this.getData()}},mounted:function(){"tourist"!=this.$store.state.identity&&this.getData()}},J=H,G=(a("879b"),Object(d["a"])(J,W,A,!1,null,"d246d7ee",null)),X=G.exports,Z=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"customerService"}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"您遇到的问题",prop:"content"}},[a("el-input",{attrs:{type:"textarea"},model:{value:t.form.content,callback:function(e){t.$set(t.form,"content",e)},expression:"form.content"}})],1),a("el-form-item",{attrs:{label:"Email",prop:"email"}},[a("el-input",{model:{value:t.form.email,callback:function(e){t.$set(t.form,"email",e)},expression:"form.email"}})],1),a("el-form-item",[a("div",{staticClass:"btn_box"},[a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.submitForm("form")}}},[t._v("反馈问题")]),a("el-button",{on:{click:function(e){return t.resetForm("form")}}},[t._v("重置")])],1)])],1)],1)},Q=[],K={data:function(){return{form:{content:"",email:""},rules:{content:[{required:!0,message:"请输入您遇到的问题",trigger:["blur","change"]}],email:[{required:!0,message:"请输入正确的邮箱格式",type:"email",trigger:["blur","change"]}]}}},methods:{submitForm:function(t){var e=this;this.$refs[t].validate(function(t){if(!t)return console.log("error submit!!"),!1;var a={content:e.form.content,email:e.form.email};console.log(a),e.axios.post("/customerService",a).then(function(t){1==t.data.code&&(e.$message("我们已收到您的消息"),e.content="",e.email="")}).catch(function(t){console.log(t),e.$message("服务器无法连接")})})},resetForm:function(t){this.$refs[t].resetFields()}}},tt=K,et=(a("26b2"),Object(d["a"])(tt,Z,Q,!1,null,null,null)),at=et.exports,st=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"user"}},[a("div",{staticClass:"head"},[a("h4",[t._v("用户中心")]),a("hr"),a("nav",{staticClass:"nav nav-pills flex-column flex-sm-row"},[a("a",{staticClass:"flex-sm-fill text-sm-center nav-link active",on:{click:function(e){return t.$router.push("/user/collection")}}},[t._v("收藏")]),a("a",{staticClass:"flex-sm-fill text-sm-center nav-link",on:{click:function(e){return t.$router.push("/user/bought")}}},[t._v("已购")]),a("a",{staticClass:"flex-sm-fill text-sm-center nav-link",on:{click:function(e){return t.$router.push("/user/info")}}},[t._v("个人信息")]),a("a",{staticClass:"flex-sm-fill text-sm-center nav-link",on:{click:t.logout}},[t._v("注销")])])]),a("div",{staticClass:"main"},[a("transition",[a("router-view")],1)],1)])},nt=[],it=a("de8e"),ot=it["a"],ct=(a("d6ef"),Object(d["a"])(ot,st,nt,!1,null,"d81179d8",null)),rt=ct.exports,lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"collection"}},[a("div",{staticClass:"novel_list row"},[0==t.data.length?a("h4",{staticStyle:{"margin-left":"20px"}},[t._v("暂无收藏")]):t._e(),t._l(t.data,function(e){return a("div",{key:e.id,staticClass:"col-md-4"},[a("div",{staticClass:"card"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.cover,expression:"item.cover == ''"}],staticClass:"cover"},[t._v("无封面")]),a("img",{staticClass:"card-img-top",attrs:{src:e.cover,alt:"Card image cap"}}),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.novelName))]),a("p",{staticClass:"card-text"},[t._v(t._s(t._f("introduction")(e.introduction)))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push("/novel/"+e.novelId)}}},[t._v("查看详情")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.deleteCollection(e.id)}}},[t._v("删除收藏")])],1)])])})],2),a("div",{staticClass:"title"},[t._v("- 为您推荐 -")]),a("div",{staticClass:"novel_list row"},t._l(t.recommendData,function(e){return a("div",{key:e.id,staticClass:"col-md-4"},[a("div",{staticClass:"card"},[a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.novelName))]),a("p",{staticClass:"card-text"},[t._v(t._s(t._f("introduction")(e.introduction)))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push("/novel/"+e.id)}}},[t._v("查看详情")])],1)])])}),0)])},dt=[],ut={data:function(){return{data:[],recommendData:[]}},methods:{deleteCollection:function(t){var e=this;this.$confirm("您确定要删除吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.get("/deleteCollection?id="+t).then(function(t){1==t.data.code?(e.$message("删除成功"),e.getData()):e.$message("删除失败")}).catch(function(){e.$message("无法连接服务器")})})},getData:function(){var t=this;this.axios.get("/getCollection").then(function(e){1==e.data.code?t.data=e.data.data:t.$message("获取失败")}).catch(function(){t.$message("无法连接服务器")})},getRecommend:function(){var t=this;this.axios.get("/getRecommend ").then(function(e){1==e.data.code&&(t.recommendData=e.data.data.slice(0,3))}).catch(function(e){console.log(e),t.$message("服务器无法连接")})}},mounted:function(){this.getData(),this.getRecommend()}},mt=ut,ft=(a("3405"),Object(d["a"])(mt,lt,dt,!1,null,"34bab0f2",null)),vt=ft.exports,ht=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"info"}},[a("ul",{staticClass:"list-group"},[a("li",{staticClass:"list-group-item"},[a("div",{staticClass:"key"},[t._v("账号")]),a("div",{staticClass:"value"},[t._v(t._s(t.data.account))])]),a("li",{staticClass:"list-group-item"},[a("div",{staticClass:"key"},[t._v("用户名")]),a("div",{staticClass:"value"},[t._v(t._s(t.data.name))])]),a("li",{staticClass:"list-group-item"},[a("div",{staticClass:"key"},[t._v("身份")]),a("div",{staticClass:"value"},[t._v(t._s(t._f("identity")(t.data.identity)))])]),a("li",{staticClass:"list-group-item"},[a("div",{staticClass:"key"},[t._v("vip点")]),a("div",{staticClass:"value"},[t._v(t._s(t.data.vp))])]),a("li",{staticClass:"list-group-item"},[a("div",{staticClass:"key"},[t._v("喜好")]),a("div",{staticClass:"value"},t._l(t.data.like,function(e){return a("el-tag",{key:e},[t._v(t._s(e))])}),1)])]),a("div",{staticClass:"btn_box"},["reader"==t.$store.state.identity?a("el-button",{attrs:{type:"primary"},on:{click:t.signing}},[t._v("签约为作者")]):t._e(),a("el-button",{attrs:{type:"success"},on:{click:function(e){return t.$router.push("/user/recharge")}}},[t._v("充值vip点")])],1)])},pt=[],gt={data:function(){return{data:{}}},methods:{getUserInfo:function(t){var e=this;this.axios.get("/userInfo").then(function(a){if(1==a.data.code){var s=a.data.data;t(s)}else e.$message("获取用户信息失败")}).catch(function(t){console.log(t),e.$message("与服务器连接失败")})},signing:function(){var t=this;this.$confirm("您却定要签约为作者吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.get("/signing").then(function(e){1==e.data.code?(t.$message("签约成功，正在刷新页面"),setTimeout(function(){window.location.reload()},1e3)):t.$message("签约失败")}).catch(function(e){console.log(e),t.$message("与服务器连接失败")})}).catch(function(){t.$message("已取消")})}},mounted:function(){var t=this;this.getUserInfo(function(e){t.data=e})}},bt=gt,_t=(a("27d6"),Object(d["a"])(bt,ht,pt,!1,null,"2ce477ee",null)),Ct=_t.exports,yt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"recharge"}},[a("h4",[t._v("充值中心")]),a("el-input",{attrs:{placeholder:"请输入充值金额（单位：元）"},model:{value:t.rechargeNum,callback:function(e){t.rechargeNum=e},expression:"rechargeNum"}},[a("template",{slot:"append"},[a("el-button",{attrs:{type:"success"},on:{click:t.recharge}},[t._v("充值")])],1)],2),a("div",{staticClass:"label"},[t._v("折合Vip点："+t._s(100*t.rechargeNum))])],1)},$t=[],xt={data:function(){return{rechargeNum:""}},methods:{recharge:function(){var t=this;""==this.rechargeNum?this.$message("请输入充值金额"):/^[0-9]*$/.test(this.rechargeNum)?this.axios.get("/recharge?vp="+100*n()(this.rechargeNum)).then(function(e){1==e.data.code?(t.$message("充值成功，即将返回上一界面"),setTimeout(function(){t.userInfo(),t.$router.go(-1)},1e3)):t.$message("充值失败")}).catch(function(e){console.log(e),t.$message("无法连接服务器")}):this.$message("请输入纯数字")},userInfo:function(){var t=this;this.axios.get("/userInfo").then(function(e){if(1==e.data.code){var a=e.data.data;t.$store.commit("setData",a)}else t.$message("登录出错")}).catch(function(){t.$store.state.identity="tourist",t.$message("您正在以游客身份浏览")})}}},kt=xt,jt=(a("bd46"),Object(d["a"])(kt,yt,$t,!1,null,"70110482",null)),wt=jt.exports,Nt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"bought"}},[a("div",{staticClass:"novel_list row"},[0==t.data.length?a("h4",{staticStyle:{"margin-left":"20px"}},[t._v("您还没有购买过任何小说")]):t._e(),t._l(t.data,function(e){return a("div",{key:e.id,staticClass:"col-md-4"},[a("div",{staticClass:"card"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.cover,expression:"item.cover == ''"}],staticClass:"cover"},[t._v("无封面")]),a("img",{staticClass:"card-img-top",attrs:{src:e.cover,alt:"Card image cap"}}),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.novelName))]),a("p",{staticClass:"card-text"},[t._v(t._s(t._f("introduction")(e.introduction)))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push("/novel/"+e.novelId)}}},[t._v("查看详情")])],1)])])})],2)])},Dt=[],It={data:function(){return{data:[]}},methods:{getData:function(){var t=this;this.axios.get("/getBought").then(function(e){1==e.data.code&&(t.data=e.data.data)}).catch(function(e){console.log(e),t.$message("无法获取已购列表，服务器无法连接")})}},mounted:function(){this.getData()}},Ot=It,St=Object(d["a"])(Ot,Nt,Dt,!1,null,"2ddce96e",null),Tt=St.exports,Lt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"editor"}},[a("div",{staticClass:"select"},[a("h4",[t._v("创作中心")]),a("hr"),a("div",{staticClass:"btn_box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:""},on:{click:function(e){return t.$router.push("/editor/createNovel")}}}),a("el-button",{attrs:{type:"warning",icon:"el-icon-document",circle:""},on:{click:function(e){return t.$router.push("/editor/novelManager")}}}),a("el-button",{attrs:{type:"info",icon:"el-icon-edit-outline",circle:""},on:{click:function(e){return t.$router.push("/editor/draft")}}}),a("el-button",{attrs:{type:"success",icon:"mdi mdi-cash-usd",circle:""},on:{click:function(e){return t.$router.push("/editor/income")}}})],1)]),a("div",{staticClass:"main"},[a("transition",[a("router-view")],1)],1)])},Et=[],Mt={data:function(){return{}}},zt=Mt,Bt=(a("b78d"),Object(d["a"])(zt,Lt,Et,!1,null,"0e9a8393",null)),Ut=Bt.exports,Ft=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"createNovel"}},[a("h4",[t._v("创建小说")]),a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules,"label-position":"top"}},[a("el-form-item",{attrs:{label:"小说名称",prop:"novelName"}},[a("el-input",{attrs:{placeholder:"请输入"},model:{value:t.form.novelName,callback:function(e){t.$set(t.form,"novelName",e)},expression:"form.novelName"}})],1),a("el-form-item",{attrs:{label:"上传封面"}},[a("el-upload",{attrs:{action:"http://upload.qiniup.com","on-success":t.uploadSuccess,"file-list":t.fileList,limit:1,"list-type":"picture",data:t.postData,accept:".png, .jpg"}},[a("el-button",{attrs:{size:"small",type:"primary"}},[t._v("点击上传")]),a("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传jpg/png文件，且不超过500kb")])],1)],1),a("el-form-item",{attrs:{label:"简介",prop:"introduction"}},[a("el-input",{attrs:{type:"textarea",rows:"5",placeholder:"请输入"},model:{value:t.form.introduction,callback:function(e){t.$set(t.form,"introduction",e)},expression:"form.introduction"}})],1),a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-6"},[a("el-form-item",{attrs:{label:"小说分类",prop:"sort"}},[a("el-select",{attrs:{placeholder:"请选择小说分类"},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}},[a("el-option",{attrs:{label:"玄幻",value:"玄幻"}}),a("el-option",{attrs:{label:"奇幻",value:"奇幻"}}),a("el-option",{attrs:{label:"武侠",value:"武侠"}}),a("el-option",{attrs:{label:"仙侠",value:"仙侠"}}),a("el-option",{attrs:{label:"都市",value:"都市"}}),a("el-option",{attrs:{label:"现实",value:"现实"}}),a("el-option",{attrs:{label:"爱情",value:"爱情"}}),a("el-option",{attrs:{label:"游戏",value:"游戏"}}),a("el-option",{attrs:{label:"科幻",value:"科幻"}})],1)],1)],1),a("div",{staticClass:"col-md-6"},[a("el-form-item",{attrs:{label:"售价 (单位：vip点)",prop:"price"}},[a("el-input",{attrs:{placeholder:"请输入",disabled:t.free},model:{value:t.form.price,callback:function(e){t.$set(t.form,"price",e)},expression:"form.price"}}),a("el-checkbox",{on:{change:function(e){return t.readForFree()}},model:{value:t.free,callback:function(e){t.free=e},expression:"free"}},[t._v("免费阅读")])],1)],1),a("div",{staticClass:"btn_box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-upload"},on:{click:t.publish}},[t._v("发布")]),a("el-button",{attrs:{type:"danger",icon:"el-icon-circle-close-outline"},on:{click:t.clear}},[t._v("清空")])],1)])],1)],1)},Rt=[],Pt={data:function(){return{form:{novelName:"",introduction:"",sort:"",cover:"",price:"",time:""},rules:{novelName:[{required:!0,message:"请输入小说名称",trigger:["blur","change"]}],introduction:[{required:!0,message:"请输入简介",trigger:["blur","change"]}],sort:[{required:!0,message:"请选择分类",trigger:["blur","change"]}],price:[{required:!0,message:"请输入售价",trigger:["blur","change"]}]},fileList:[],free:!1,postData:{token:"noucWTUuRY84Z0DSDJyJiszjO7OtRY3Vtj4yAWT1:1D6bk4yfCW51XqjgG-igP_Bi6dc=:eyJzY29wZSI6Im5vdmVsLXN5c3RlbSIsImRlYWRsaW5lIjoxNTc1MTI5NjAwfQ=="},EncodedEntryURI:""}},methods:{publish:function(){var t=this;this.$refs.form.validate(function(e){e&&(t.form.time=Date.parse(new Date).toString(),t.axios.post("/publishNovel",t.form).then(function(e){1==e.data.code?(t.$message("发布成功"),t.$router.push("/editor/novelManager")):t.$message("发布失败")}).catch(function(e){console.log(e),t.$message("无法连接服务器")}))})},clear:function(){this.$refs.form.resetFields(),this.free=!1},readForFree:function(){this.free?this.form.price="0":this.form.price=""},uploadSuccess:function(t){this.form.cover="http://study.esunr.xyz/"+t.key,this.EncodedEntryURI=t.key}}},qt=Pt,Yt=(a("be93"),a("2cdc"),Object(d["a"])(qt,Ft,Rt,!1,null,"4c704052",null)),Vt=Yt.exports,Wt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"novelManager"}},[a("h4",[t._v("管理小说")]),a("div",{staticClass:"main novel_list row"},[a("h3",{directives:[{name:"show",rawName:"v-show",value:0==t.data.length,expression:"data.length == 0"}],staticStyle:{"padding-left":"10px",opacity:"0.8"}},[t._v("您还没有发布过小说")]),t._l(t.data,function(e){return a("div",{key:e.id,staticClass:"col-md-4"},[a("div",{staticClass:"card"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.cover,expression:"item.cover == ''"}],staticClass:"cover"},[t._v("无封面")]),a("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.cover,expression:"item.cover != ''"}],staticClass:"card-img-top",attrs:{src:e.cover,alt:"Card image cap"}}),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.novelname))]),a("p",{staticClass:"card-text"},[t._v(t._s(t._f("introduction")(e.introduction)))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push("/novel/"+e.id)}}},[t._v("查看")]),a("el-button",{attrs:{type:"info"},on:{click:function(a){return t.$router.push("/editor/addChapter/"+e.id)}}},[t._v("添加章节")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.deleteNovel(e.id)}}},[t._v("删除")])],1)])])})],2)])},At=[],Ht={data:function(){return{data:[]}},methods:{deleteNovel:function(t){var e=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(t),e.axios.get("/deleteNovel?id="+t).then(function(t){1==t.data.code?(e.$message({type:"success",message:"删除成功!"}),e.getData()):e.$message({type:"info",message:"删除失败"})}).catch(function(t){console.log(t),e.$message({type:"info",message:"无法连接服务器"})})}).catch(function(){e.$message({type:"info",message:"已取消删除"})})},getData:function(){var t=this;this.axios.get("/getPublishedNovel").then(function(e){1==e.data.code?t.data=e.data.data:t.$message("获取失败")}).catch(function(e){console.log(e),t.$message("服务器连接失败")})}},mounted:function(){this.getData()}},Jt=Ht,Gt=(a("72fb"),Object(d["a"])(Jt,Wt,At,!1,null,"346cc565",null)),Xt=Gt.exports,Zt=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"income"}},[a("h4",[t._v("稿酬收入")]),a("div",{staticClass:"main"},[a("div",{staticClass:"info"},[a("div",{staticClass:"key"},[t._v("VIP点数")]),a("div",{staticClass:"value"},[t._v(t._s(t.vp))])]),a("div",{staticClass:"info"},[a("div",{staticClass:"key"},[t._v("折合人民币")]),a("div",{staticClass:"value"},[t._v(t._s(t.vp/100)+"元")])]),a("div",{staticClass:"info"},[a("div",{staticClass:"key"},[t._v("总收入")]),a("div",{staticClass:"value"},[t._v(t._s(3e3+t.vp/100)+"元")])])])])},Qt=[],Kt={data:function(){return{vp:this.$store.state.vp}},mounted:function(){}},te=Kt,ee=(a("42b3"),Object(d["a"])(te,Zt,Qt,!1,null,"0bedece2",null)),ae=ee.exports,se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"addChapter","element-loading-text":"拼命上传中"}},[a("h4",[t._v("添加章节")]),a("div",{staticClass:"published_chapter"},[a("ul",{staticClass:"list-group"},[a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center",staticStyle:{"font-weight":"bold"}},[t._v("\n        已发布章节\n        "),a("span",{staticClass:"badge badge-primary badge-pill"},[t._v(t._s(t.data.length))])]),t._l(t.data,function(e){return a("li",{key:e.id,staticClass:"list-group-item d-flex justify-content-between align-items-center"},[t._v("第"+t._s(e.chapter)+"章："+t._s(e.title))])})],2)]),a("div",{staticClass:"add"},[a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.form,rules:t.rules,"label-position":"top"}},[a("div",{staticClass:"title"},[t._v("添加章节：第"+t._s(t.form.chapter)+"章")]),a("el-form-item",{attrs:{label:"章节标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请填写"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-form-item",{staticClass:"upload_group",attrs:{label:"上传文件方式添加章节"}},[a("i",{staticClass:"el-icon-upload"}),a("el-upload",{ref:"upload",attrs:{action:t.COMMON.host+"/uploadChapter","file-list":t.fileList,"on-change":t.selectFile,"on-remove":t.removeFile,"on-success":t.uploadSuccess,"on-error":t.uploadError,limit:1,"auto-upload":!1,data:t.uploadAuthorization,accept:".txt"}},[a("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件 | 仅限.txt文件")])],1)],1),a("el-form-item",[a("div",{staticClass:"editor_head"},[t._v("\n          小说编辑器\n          "),a("span",{directives:[{name:"show",rawName:"v-show",value:"1"==t.form.upload,expression:"form.upload == '1'"}]},[t._v("（已禁用，已编辑内容不会被上传）")])]),a("div",{attrs:{id:"editor_addChapter"}})]),a("div",{staticClass:"btn_box"},[a("el-button",{attrs:{type:"primary"},on:{click:t.publish}},[t._v("确定发布")]),a("el-button",{attrs:{type:"info"},on:{click:t.save}},[t._v("存为草稿")])],1)],1)],1)])},ne=[],ie=a("1a0b"),oe=a.n(ie),ce=new oe.a("#editor_addChapter"),re={data:function(){return{loading:!1,data:[],form:{chapter:"",title:"",content:"",upload:"0",novelId:this.$route.params.id},rules:{title:[{required:!0,message:"请填写章节标题",trigger:["change","blur"]}]},fileList:[],uploadAuthorization:{id:this.$route.params.id}}},methods:{createEditor:function(){ce.customConfig.menus=[],ce.customConfig.zIndex=1,ce.create()},selectFile:function(){this.form.upload="1",ce.$textElem.attr("contenteditable",!1)},removeFile:function(){this.form.upload="0",ce.$textElem.attr("contenteditable",!0)},publish:function(){var t=this;this.$confirm("发布后的小说将不能更改，您确定发布吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){if(""!=t.form.title)if("0"==t.form.upload){var e=ce.txt.html().replace(/<p>/g,"").replace(/<\/p>/g,"").replace(/<br>/g,"");if(""==e)return void t.$message("章节内容不能为空！");t.form.content=ce.txt.html(),t.loading=!0,console.log(t.form),t.axios.post("/addChapter",t.form).then(function(e){1==e.data.code?(t.$message("发布成功，即将跳转到管理页面"),setTimeout(function(){t.$router.push("/editor/novelManager")},1e3)):t.$message("发布失败")}).catch(function(e){console.log(e),t.$message("发布失败，无法连接服务器")}),t.loading=!1}else t.loading=!0,t.$refs.upload.submit();else t.$message("章节标题不能为空！")})},save:function(){var t=this;if("1"!=this.form.upload)if(""!=this.form.title){if("0"==this.form.upload){var e=ce.txt.html().replace(/<p>/g,"").replace(/<\/p>/g,"").replace(/<br>/g,"");if(""==e)return void this.$message("章节内容不能为空！");this.form.content=ce.txt.html(),this.loading=!0;var a={title:this.form.title,content:this.form.content,novelId:this.form.novelId,chapter:this.form.chapter};this.axios.post("/addChapterToDraft",a).then(function(e){1==e.data.code&&(t.$message("添加草稿成功，正在返回小说管理界面"),setTimeout(function(){t.$router.push("/editor/novelManager")},1e3))}).catch(function(e){console.log(e),t.$message("无法连接服务器")}),this.loading=!1}}else this.$message("章节标题不能为空！");else this.$message("上传文件方式添加的章节无法存为草稿")},uploadSuccess:function(t){var e=this;this.form.content="",console.log(t),this.loading=!1;var a={chapter:this.form.chapter,title:this.form.title,upload:"1",novelId:this.form.novelId,id:t.data.id.toString()};console.log(a),1==t.code&&this.axios.post("/addChapter",a).then(function(t){1==t.data.code&&(e.$message("发布成功，即将跳转到管理页面"),setTimeout(function(){e.$router.push("/editor/novelManager")},1e3))}).catch(function(t){console.log(t),e.$message("发布失败，无法连接服务器")})},uploadError:function(){this.loading=!1,this.$message("上传失败！")},getData:function(){var t=this;this.axios.get("/getNovelChapter?id="+this.$route.params.id).then(function(e){1==e.data.code?(t.data=e.data.data,t.form.chapter=(t.data.length+1).toString()):t.$message("获取章节失败")}).catch(function(e){console.log(e),t.$message("获取章节失败")})}},mounted:function(){this.createEditor(),this.getData()}},le=re,de=(a("1a13"),a("fc9e"),Object(d["a"])(le,se,ne,!1,null,"3697ad90",null)),ue=de.exports,me=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"draft"}},[a("h4",[t._v("草稿箱")]),a("h3",{directives:[{name:"show",rawName:"v-show",value:0==t.data.length,expression:"data.length == 0"}]},[t._v("无草稿")]),a("div",{staticClass:"main"},t._l(t.data,function(e){return a("div",{key:e.id,staticClass:"card"},[a("div",{staticClass:"card-header"},[t._v("来自小说：《"+t._s(e.novelName)+"》")]),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.title))]),a("p",{staticClass:"card-text"},[t._v("章节：第"+t._s(e.chapter)+"章")]),a("router-link",{staticClass:"btn btn-primary",attrs:{to:"/editor/draft/"+e.id}},[t._v("修改草稿")])],1)])}),0)])},fe=[],ve={data:function(){return{data:[]}},mounted:function(){var t=this;this.axios.get("/getDraftBox").then(function(e){1==e.data.code&&(t.data=e.data.data)}).catch(function(e){console.log(e),t.$message("服务器连接失败")})}},he=ve,pe=(a("db0d"),Object(d["a"])(he,me,fe,!1,null,"11b51c7f",null)),ge=pe.exports,be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"editDraft"}},[a("h4",[t._v("修改草稿")]),a("el-form",{ref:"ruleForm",staticClass:"demo-ruleForm",attrs:{model:t.form,rules:t.rules,"label-position":"top"}},[a("div",{staticClass:"title"},[t._v("修改章节：第"+t._s(t.form.chapter)+"章")]),1==t.published?a("div",{staticClass:"title waring"},[t._v("您已经发布过该章节，不能发布该草稿")]):t._e(),a("el-form-item",{attrs:{label:"章节标题",prop:"title"}},[a("el-input",{attrs:{placeholder:"请填写"},model:{value:t.form.title,callback:function(e){t.$set(t.form,"title",e)},expression:"form.title"}})],1),a("el-form-item",[a("div",{staticClass:"editor_head"},[t._v("小说编辑器")]),a("div",{attrs:{id:"editor_editDraft"}})]),a("div",{staticClass:"btn_box"},[0==t.published?a("el-button",{attrs:{type:"primary"},on:{click:t.publish}},[t._v("发布")]):t._e(),0==t.published?a("el-button",{attrs:{type:"info"},on:{click:t.save}},[t._v("保存")]):t._e(),a("el-button",{attrs:{type:"danger"},on:{click:t.deleteDraft}},[t._v("删除")])],1)],1)],1)},_e=[],Ce=new oe.a("#editor_editDraft"),ye={data:function(){return{publishedChapter:[],published:0,form:{title:"",content:"",novelId:"",chapter:""},rules:{title:[{required:!0,message:"请填写章节标题",trigger:["change","blur"]}]}}},methods:{formDataInit:function(){Ce.customConfig.menus=[],Ce.customConfig.zIndex=1,Ce.create(),Ce.txt.html(this.form.content)},check:function(){var t=Ce.txt.html().replace(/<p>/g,"").replace(/<\/p>/g,"").replace(/<br>/g,"");return""==this.form.title?(this.$message("章节标题不能为空"),!1):""==t?(this.$message("章节内容不能为空"),!1):(this.form.content=Ce.txt.html(),!0)},publish:function(){var t=this;if(this.check()){var e={chapter:this.form.chapter,title:this.form.title,content:this.form.content,upload:0,novelId:this.form.novelId};this.$confirm("发布草稿后原草稿将被删除且不能更改","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e),t.axios.post("/addChapter",e).then(function(e){1==e.data.code&&(t.$message("发布成功，正在删除该草稿"),setTimeout(function(){t.deleteDraftSure()},1e3))}).catch(function(e){console.log(e),t.$message("发布失败，无法连接服务器")})})}},save:function(){var t=this;if(this.check()){var e={title:this.form.title,content:this.form.content,id:this.form.id};console.log(e),this.axios.post("saveChapterToDraft",e).then(function(e){1==e.data.code&&t.$message("保存草稿成功")}).catch(function(e){console.log(e),t.$message("保存失败，无法连接服务器")})}},deleteDraft:function(){var t=this;this.$confirm("您确定要删除草稿？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.deleteDraftSure()})},deleteDraftSure:function(){var t=this;this.axios.get("/deleteDraft?id="+this.$route.params.id).then(function(e){1==e.data.code&&(t.$message("删除成功"),t.$router.push("/editor/draft"))}).catch(function(e){console.log(e),t.$message("服务器无法连接，删除失败")})},getDraft:function(t){var e=this;this.axios.get("/getDraft?id="+this.$route.params.id).then(function(a){1==a.data.code&&(e.form=a.data.data,e.form.id=e.$route.params.id,e.formDataInit(),t())}).catch(function(t){console.log(t),e.$message("无法连接服务器")})},getPublished:function(){var t=this;this.axios.get("/getNovelChapter?id="+this.form.novelId).then(function(e){1==e.data.code?(t.publishedChapter=e.data.data,t.publishedChapter.length>=t.form.chapter&&(t.published=1)):t.$message("获取章节失败")}).catch(function(e){console.log(e),t.$message("获取章节失败")})}},mounted:function(){var t=this;this.getDraft(function(){t.getPublished()})}},$e=ye,xe=(a("2d64"),a("309d"),Object(d["a"])($e,be,_e,!1,null,"7c61f6ff",null)),ke=xe.exports,je=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"novel","element-loading-text":"正在加载小说信息"}},[a("div",{attrs:{id:"novel_info"}},[a("div",{staticClass:"row"},[a("div",{staticClass:"col-md-4 cover"},[""==t.data.cover?a("div",{staticClass:"noCover"},[t._v("无封面")]):t._e(),""!=t.data.cover?a("img",{attrs:{src:t.data.cover}}):t._e()]),a("div",{staticClass:"col-md-8 info"},[a("div",{staticClass:"novelName"},[t._v("\n          "+t._s(t.data.novelName)+"\n          "),a("el-tag",{staticStyle:{"margin-left":"10px",position:"relative",bottom:"5px"},attrs:{type:"info"}},[t._v(t._s(t.data.sort))])],1),a("hr"),a("div",{staticClass:"introduction"},[t._v("简介："+t._s(t.data.introduction))]),a("div",{staticClass:"num_box"},[a("div",{staticClass:"num"},[t._v("阅读："+t._s(t.data.clicknum))]),a("div",{staticClass:"num"},[t._v("下载："+t._s(t.data.downloadnum))]),a("div",{staticClass:"num"},[t._v("评论："+t._s(t.data.commentnum))])]),a("div",{staticClass:"editor_box"},[a("div",{staticClass:"editor_info"},[t._v("作者："+t._s(t.data.editorName))]),a("div",{staticClass:"editor_info"},[t._v("发布日期："+t._s(t._f("dateFormat")(t.data.time,"YYYY-MM-DD")))])]),a("el-button-group",{staticClass:"btn_box"},["tourist"==t.$store.state.identity?a("div",[a("el-button",{attrs:{type:"info"},on:{click:t.login}},[t._v("登录后可购买")])],1):t._e(),"tourist"!=t.$store.state.identity?a("div",[0==t.collectionStatus?a("el-button",{attrs:{type:"warning",icon:"el-icon-star-off"},on:{click:t.collection}},[t._v("收藏")]):t._e(),1==t.collectionStatus?a("el-button",{attrs:{type:"warning",icon:"el-icon-star-on"},on:{click:t.deleteCollectionByNovId}},[t._v("已收藏")]):t._e(),0==t.status?a("el-button",{attrs:{type:"primary"},on:{click:t.buyNovel}},[t._v("购买（"+t._s(t.data.price)+"Vip点）")]):t._e(),1==t.status?a("el-button",{attrs:{type:"success"}},[t._v("\n              已购买\n              "),t.data.editorId==t.$store.state.uid?a("span",[t._v("（作者为您本人）")]):t._e()]):t._e()],1):t._e()])],1)])]),a("div",{attrs:{id:"novel_chapter"}},[a("ul",{staticClass:"list-group"},[a("li",{staticClass:"list-group-item d-flex justify-content-between align-items-center",staticStyle:{"font-weight":"bold"}},[t._v("\n        已发布章节\n        "),a("span",{staticClass:"badge badge-primary badge-pill"},[t._v(t._s(t.published_chapter_num))])]),t._l(t.chapter_data,function(e){return a("li",{key:e.id,staticClass:"list-group-item d-flex justify-content-between align-items-center chapter_list_item",on:{click:function(a){return t.$router.push("/novel/"+t.novelId+"/"+e.chapter)}}},[t._v("\n        第"+t._s(e.chapter)+"章："+t._s(e.title)+"\n        "),a("el-button",{attrs:{icon:"el-icon-download",type:"primary",circle:"",size:"small"},on:{click:function(a){return a.stopPropagation(),t.download(e.id)}}})],1)}),0==this.status?a("li",{staticClass:"list-group-item align-items-center block"},[t._v("抱歉，未购买仅能免费阅读前三章的内容")]):t._e()],2)]),a("div",{attrs:{id:"comment"}},["tourist"==t.$store.state.identity?a("div",{staticClass:"tourist"},[t._v("请您\n      "),a("el-button",{attrs:{type:"danger"},on:{click:t.login}},[t._v("登录")]),t._v("后评论\n    ")],1):t._e(),1==t.ban&&"tourist"!=t.$store.state.identity?a("div",{staticClass:"ban"},[a("i",{staticClass:"el-icon-error"}),t._v(" 您被禁言中\n    ")]):t._e(),"tourist"!=t.$store.state.identity&&1!=this.ban?a("div",{staticClass:"user_comment"},[a("el-input",{staticClass:"user_comment",attrs:{type:"textarea",rows:"4"},model:{value:t.user_comment,callback:function(e){t.user_comment=e},expression:"user_comment"}}),a("el-button",{attrs:{type:"primary"},on:{click:t.publishComment}},[t._v("发布评论")])],1):t._e(),a("div",{staticClass:"comment_list"},[0==t.comment_data.length?a("div",{staticClass:"no_commit"},[t._v("== 暂无评论 ==")]):t._e(),t._l(t.comment_data,function(e,s){return a("div",{key:s,staticClass:"comment_card"},[a("div",{staticClass:"content"},[t._v(t._s(e.name)+"："+t._s(e.content))]),a("hr"),a("div",{staticClass:"time"},[a("span",{staticClass:"report",on:{click:function(a){return t.report(e.id)}}},[t._v("举报")]),t._v("\n          "+t._s(t._f("dateFormat")(e.time,"YYYY-MM-DD HH:mm"))+"\n        ")])])}),t.comment_data.length<t.comment_total?a("el-button",{staticClass:"load_more",attrs:{type:"primary",icon:"el-icon-arrow-down",plain:""},on:{click:t.loadMore}},[t._v("加载更多")]):t._e()],2)])])},we=[],Ne=(a("7f7f"),{data:function(){return{loading:!0,collectionStatus:0,status:0,novelId:this.$route.params.id,data:{},chapter_data:[],published_chapter_num:"",comment_data:[],user_comment:"",comment_page:1,comment_total:0,ban:1}},methods:{getData:function(){var t=this;this.axios.get("/getNovelInfo?id="+this.$route.params.id).then(function(e){1==e.data.code?(t.data=e.data.data,t.getStatus()):t.$message("获取失败")}).catch(function(e){console.log(e),t.$message("获取小说信息失败，无法连接服务器")})},getChapter:function(){var t=this;this.axios.get("/getNovelChapter?id="+this.$route.params.id).then(function(e){1==e.data.code?(t.chapter_data=e.data.data,t.published_chapter_num=e.data.data.length,t.getData()):t.$message("获取章节失败")}).catch(function(e){console.log(e),t.$message("获取章节失败，无法连接服务器")})},getStatus:function(){var t=this;"tourist"!=this.$store.state.identity?this.axios.get("/getStatus?novelId="+this.novelId).then(function(e){1==e.data.code&&(t.$store.state.uid==t.data.editorId?t.status=1:t.status=e.data.data.status,t.blockRead())}).catch(function(e){console.log(e),t.$message("获取购买状态失败，无法连接服务器")}):this.blockRead()},blockRead:function(){0==this.status&&this.chapter_data.length>3&&(this.chapter_data=this.chapter_data.slice(0,3)),this.loading=!1},getCollectionStatus:function(){var t=this;"tourist"!=this.$store.state.identity&&this.axios.get("/getCollectionStatus?id="+this.$route.params.id).then(function(e){1==e.data.code&&1==e.data.data.status&&(t.collectionStatus=1)}).catch(function(e){console.log(e),t.$message("获取收藏状态失败，无法连接服务器")})},collection:function(){var t=this;this.axios.get("/collection?id="+this.$route.params.id).then(function(e){1==e.data.code&&(t.$message("收藏成功"),t.collectionStatus=1)}).catch(function(e){console.log(e),t.$message("收藏失败，无法连接服务器")})},deleteCollectionByNovId:function(){var t=this;this.axios.get("/deleteCollectionByNovId?id="+this.novelId).then(function(e){1==e.data.code&&(t.$message("已取消收藏"),t.collectionStatus=0)}).catch(function(e){console.log(e),t.$message("取消收藏失败，无法连接服务器")})},buyNovel:function(){var t=this;this.$confirm("您确定花费"+this.data.price+"VIP点数来购买吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.axios.get("/buyNovel?id="+t.novelId).then(function(e){1==e.data.code?(t.$message("购买成功"),t.getChapter()):(t.$router.push("/user/recharge"),t.$message("您的VIP点数不足，请充值"))}).catch(function(e){console.log(e),t.$message("购买失败，服务器无法连接")})}).catch(function(){t.$message({type:"info",message:"已取消购买"})})},publishComment:function(){var t=this,e=this.user_comment.replace(/^\s+|\s+$/g,"");if(""!=e){var a=Date.parse(new Date),s={id:0,uid:this.$store.state.uid,name:this.$store.state.name,content:e,time:a};this.comment_data.unshift(s);var n={novelId:this.novelId,content:e,time:a};this.axios.post("/publishComment",n).then(function(e){1==e.data.code&&(t.$message("发布评论成功"),t.getData(),t.user_comment="")}).catch(function(e){console.log(e),t.$message("评论失败，服务器无法连接")})}else this.$message("输入内容不能为空")},getComment:function(){var t=this;this.axios.get("/getComment?id="+this.novelId+"&page="+this.comment_page).then(function(e){1==e.data.code&&(t.comment_data=t.comment_data.concat(e.data.data.comment_data),t.comment_total=e.data.data.total)}).catch(function(e){console.log(e),t.$message("评论获取失败，服务器无法连接")})},loadMore:function(){this.comment_page++,this.getComment()},login:function(){window.location.href=this.COMMON.login_location},banTest:function(){var t=this;"tourist"!=this.$store.state.identity&&this.axios.get("/userInfo").then(function(e){1==e.data.code&&1!=e.data.data.ban&&(t.ban=0)}).catch(function(e){console.log(e),t.$message("身份验证失败，服务器无法连接")})},download:function(t){window.location.href=this.COMMON.host+"/download?id="+t},report:function(t){var e=this;this.$confirm("您确定要举报该留言吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.get("/reportComment?id="+t).then(function(t){1==t.data.code?e.$message({type:"success",message:"举报成功!"}):e.$message("您当前无法举报")}).catch(function(t){console.log(t),e.$message("举报失败，无法连接服务器")})}).catch(function(){e.$message({type:"info",message:"操作已取消"})})}},mounted:function(){document.body.scrollTop=document.documentElement.scrollTop=0,this.getChapter(),this.getCollectionStatus(),this.getComment(),this.banTest()}}),De=Ne,Ie=(a("810c"),Object(d["a"])(De,je,we,!1,null,"121dc984",null)),Oe=Ie.exports,Se=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{directives:[{name:"loading",rawName:"v-loading.fullscreen.lock",value:t.loading,expression:"loading",modifiers:{fullscreen:!0,lock:!0}}],attrs:{id:"chapter","element-loading-text":"拼命加载中"}},[a("div",{attrs:{id:"novelInfo"}},[a("div",{staticClass:"novelName"},[t._v(t._s(t.novelData.novelName))]),a("el-button",{attrs:{icon:"el-icon-tickets"},on:{click:function(e){return t.$router.push("/novel/"+t.novelId)}}},[t._v("目录")])],1),0==t.buy?a("div",{staticClass:"noBuy"},[a("span",[t._v("您尚未购买该章节")]),a("el-button",{on:{click:function(e){return t.$router.push("/novel/"+t.novelId)}}},[t._v("购买")])],1):t._e(),1==t.buy?a("div",{attrs:{id:"chapterInfo"}},[a("div",{staticClass:"chapter"},[t._v("第"+t._s(t.chapterData.chapter)+"章")]),a("div",{staticClass:"title"},[t._v(t._s(t.chapterData.title))]),a("hr"),a("div",{staticClass:"content",domProps:{innerHTML:t._s(t.chapterData.content)}}),a("hr"),a("el-button-group",{staticClass:"btn_box"},[a("el-button",{attrs:{type:"primary",icon:"el-icon-arrow-left"},on:{click:t.Previous}},[t._v("上一章")]),a("el-button",{attrs:{type:"primary"},on:{click:t.next}},[t._v("\n        下一章\n        "),a("i",{staticClass:"el-icon-arrow-right el-icon--right"})])],1)],1):t._e()])},Te=[],Le={data:function(){return{loading:!1,novelId:this.$route.params.novelId,chapter:this.$route.params.chapter,chapterData:{},novelData:{},buy:0}},methods:{checkBuy:function(){var t=this;return this.chapter<=3?(this.buy=1,void this.getChapterData()):this.$store.state.uid==this.novelData.editorId?(this.buy=1,void this.getChapterData()):void this.axios.get("/getStatus?novelId="+this.novelId).then(function(e){1==e.data.data.status?(t.buy=1,t.getChapterData()):t.buy=0}).catch(function(e){console.log(e),t.$message("无法检查购买状态，请您检查是否登录")})},getNovelInfo:function(){var t=this;this.axios.get("/getNovelInfo?id="+this.novelId).then(function(e){1==e.data.code&&(t.novelData=e.data.data)}).catch(function(e){console.log(e),t.$message("无法获取小说信息，服务器无法连接")})},getChapterData:function(){var t=this;this.loading=!0,this.axios.get("/getChapterInfo?novelId="+this.novelId+"&chapter="+this.chapter).then(function(e){1==e.data.code?setTimeout(function(){t.chapterData=e.data.data;var a=e.data.data.content;t.chapterData.content=a.replace(/\s+/g,""),t.loading=!1,document.body.scrollTop=document.documentElement.scrollTop=0},200):t.$message("您尚未登录，不能查看后几章的内容！")}).catch(function(e){console.log(e),t.$message("无法获取章节信息，服务器无法连接"),t.loading=!1})},Previous:function(){1==this.chapter?this.$message("这已经是第一章了"):(this.chapter--,this.checkBuy())},next:function(){var t=this;this.axios.get("/getNovelChapter?id="+this.novelId).then(function(e){if(1==e.data.code){var a=e.data.data.length;if(t.chapter==a)return void t.$message("这已经是最后一章了");t.chapter++,t.checkBuy()}}).catch(function(e){console.log(e),t.$message("无法获取章节信息，服务器无法连接")})}},mounted:function(){this.getNovelInfo(),this.checkBuy()}},Ee=Le,Me=(a("2dec"),a("78c7"),Object(d["a"])(Ee,Se,Te,!1,null,"246588dd",null)),ze=Me.exports,Be=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"admin"}},[a("div",{staticClass:"head"},[a("el-menu",{staticClass:"el-menu-demo",attrs:{"default-active":"userList",mode:"horizontal"},on:{select:t.handleSelect}},[a("el-menu-item",{attrs:{index:"userList"}},[t._v("用户列表")]),a("el-menu-item",{attrs:{index:"novelList"}},[t._v("小说管理")]),a("el-menu-item",{attrs:{index:"reportList"}},[t._v("留言管理")]),a("el-menu-item",{attrs:{index:"feedback"}},[t._v("用户反馈")])],1)],1),a("div",{staticClass:"main"},[a("transition",[a("router-view")],1)],1)])},Ue=[],Fe={data:function(){return{}},methods:{handleSelect:function(t){this.$router.push("/admin/"+t)}}},Re=Fe,Pe=(a("7f45"),Object(d["a"])(Re,Be,Ue,!1,null,"15c3d117",null)),qe=Pe.exports,Ye=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"userList"}},[a("h4",[t._v("用户列表")]),a("el-button-group",[a("el-button",{attrs:{type:"primary"},on:{click:t.getUsual}},[t._v("一般用户")]),a("el-button",{attrs:{type:"info"},on:{click:t.getBaned}},[t._v("禁言用户")])],1),a("div",{staticClass:"row"},t._l(t.userList,function(e){return a("div",{key:e.id,staticClass:"col-md-4"},[a("div",{staticClass:"user_card"},[a("div",{staticClass:"name"},[t._v("\n          "+t._s(e.name)+"\n          "),a("span",[t._v(t._s(t._f("identity")(e.identity)))])]),a("div",{staticClass:"info_box"},[a("div",{staticClass:"info"},[t._v("账号："+t._s(e.account))]),a("div",{staticClass:"info"},[t._v("VIP点："+t._s(e.vp))]),a("div",{staticClass:"info"},[t._v("喜好："+t._s(t._f("arr")(e.like)))])]),a("hr"),a("div",{staticClass:"btn_box"},[0==e.ban?a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.deleteUser(e.id)}}},[t._v("删除用户")]):t._e(),0==e.ban?a("el-button",{attrs:{type:"info",size:"small"},on:{click:function(a){return t.ban(e.id)}}},[t._v("禁 言")]):t._e(),1==e.ban?a("el-button",{attrs:{type:"success",size:"small"},on:{click:function(a){return t.unBan(e.id)}}},[t._v("取消禁言")]):t._e()],1)])])}),0),t.userList.length<t.total?a("el-button",{staticClass:"load_more",attrs:{type:"primary"},on:{click:t.loadMore}},[t._v("加载更多")]):t._e()],1)},Ve=[],We={data:function(){return{userList:[{id:1,identity:"editor",name:"EsunR",account:"16031210105",vp:"1000",ban:0,like:["武侠","爱情","都市"]},{id:2,identity:"editor",name:"EsunR",account:"16031210105",vp:"1000",ban:0,like:["武侠","爱情","都市"]},{id:3,identity:"editor",name:"EsunR",account:"16031210105",vp:"1000",ban:0,like:["武侠","爱情","都市"]}],total:10,page:1,mode:0}},methods:{getUserList:function(t){var e=this;this.axios.get("/getUserList?ban="+t+"&page="+this.page).then(function(t){if(1==t.data.code)if(e.total=t.data.data.total,1==e.page)e.userList=t.data.data.userList;else{var a=e.userList,s=t.data.data.userList;e.userList=[].concat(Object(D["a"])(a),Object(D["a"])(s))}}).catch(function(t){console.log(t),e.$message("获取用户列表失败，服务器无法连接")})},getUsual:function(){this.page=1,this.mode=0,this.getUserList(this.mode)},getBaned:function(){this.page=1,this.mode=1,this.getUserList(this.mode)},loadMore:function(){this.page++,this.getUserList(this.mode)},managerUser:function(t,e){var a=this;this.axios.get("/managerUser?id="+t+"&action="+e).then(function(e){if(1==e.data.code){for(var s in a.$message("操作成功"),a.userList)a.userList[s].id==t&&a.userList.splice(s,1);a.total--}}).catch(function(t){console.log(t),a.$message("操作失败，服务器无法连接")})},ban:function(t){this.managerUser(t,"ban")},unBan:function(t){this.managerUser(t,"unban")},deleteUser:function(t){this.managerUser(t,"delete")}},mounted:function(){this.getUserList("0")}},Ae=We,He=(a("a382"),Object(d["a"])(Ae,Ye,Ve,!1,null,"93db7d58",null)),Je=He.exports,Ge=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"novelList"}},[a("h4",[t._v("小说列表")]),a("el-dialog",{attrs:{title:"小说数据",visible:t.dialogTableVisible},on:{"update:visible":function(e){t.dialogTableVisible=e}}},[a("el-table",{attrs:{data:t.gridData}},[a("el-table-column",{attrs:{property:"key",label:"范围"}}),a("el-table-column",{attrs:{property:"value",label:"数据"}})],1)],1),a("div",{staticClass:"novel_list row"},[t._l(t.data,function(e){return a("div",{key:e.id,staticClass:"col-md-4"},[a("div",{staticClass:"card"},[a("div",{directives:[{name:"show",rawName:"v-show",value:""==e.cover,expression:"item.cover == ''"}],staticClass:"cover"},[t._v("无封面")]),a("img",{directives:[{name:"show",rawName:"v-show",value:""!=e.cover,expression:"item.cover != ''"}],staticClass:"card-img-top",attrs:{src:e.cover,alt:"Card image cap"}}),a("div",{staticClass:"card-body"},[a("h5",{staticClass:"card-title"},[t._v(t._s(e.novelName))]),a("p",{staticClass:"card-text"},[t._v(t._s(t._f("introduction")(e.introduction)))]),a("el-button",{attrs:{type:"primary"},on:{click:function(a){return t.$router.push("/novel/"+e.id)}}},[t._v("详情")]),a("el-button",{attrs:{type:"info"},on:{click:function(a){return t.getNovelData(e.id)}}},[t._v("数据")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.deleteNovel(e.id)}}},[t._v("删除")])],1)])])}),t.data.length<t.total?a("el-button",{staticStyle:{display:"flex",margin:"0 auto"},attrs:{type:"primary"},on:{click:t.loadMore}},[t._v("加载更多")]):t._e()],2)],1)},Xe=[],Ze={data:function(){return{dialogTableVisible:!1,novelData:{collection:11,download:11,comment:11,click:11},gridData:[],data:[{id:"1",cover:"",novelName:"李先生传记",introduction:"这是一本小说这是一本小说这是一本小说这是一本小说这是一本小说这是一本小说这是一本小说这是一本小说这是一本小说"}],page:1,total:0}},methods:{getData:function(){var t=this;this.axios.get("/getNewPublish?page="+this.page).then(function(e){if(1==e.data.code)if(t.total=e.data.data.total,1==t.page)t.data=e.data.data.novelList;else{var a=t.data,s=e.data.data.novelList;t.data=[].concat(Object(D["a"])(a),Object(D["a"])(s))}else t.$message("获取失败")}).catch(function(e){console.log(e),t.$message("服务器连接失败")})},getNovelData:function(t){var e=this;this.dialogTableVisible=!0,this.axios.get("/getNovelData?id="+t).then(function(t){1==t.data.code&&(e.novelData=t.data.data,e.gridData=[{key:"收藏数",value:e.novelData.collection},{key:"下载数",value:e.novelData.download},{key:"留言数",value:e.novelData.comment},{key:"点击数",value:e.novelData.click}])}).catch(function(t){console.log(t),e.$message("获取数据失败，服务器无法连接")})},deleteNovel:function(t){var e=this;this.$confirm("您确定要执行此操作吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.get("/deleteNovel?id="+t).then(function(t){1==t.data.code&&(e.$message("删除成功"),e.page=1,e.getData())}).catch(function(t){console.log(t),e.$message("删除失败，服务器无法连接")}),e.$message({type:"success",message:"操作成功!"})}).catch(function(){e.$message({type:"info",message:"操作已取消"})})},loadMore:function(){this.page++,this.getData()}},mounted:function(){this.getData()}},Qe=Ze,Ke=(a("7f86"),Object(d["a"])(Qe,Ge,Xe,!1,null,"41c5fc24",null)),ta=Ke.exports,ea=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"reportList"}},[a("h4",[t._v("举报列表")]),0==t.reportList.length?a("h3",[t._v("暂无举报")]):t._e(),t._l(t.reportList,function(e,s){return a("div",{key:s,staticClass:"report_card"},[a("div",{staticClass:"box_left"},[a("div",{staticClass:"content"},[t._v("评论："+t._s(e.content))]),a("div",{staticClass:"user"},[t._v("用户："+t._s(e.name))])]),a("div",{staticClass:"box_right"},[a("el-button",{attrs:{type:"info"},on:{click:function(a){return t.banUser(e.uid)}}},[t._v("禁言用户")]),a("el-button",{attrs:{type:"danger"},on:{click:function(a){return t.deleteComment(e.id)}}},[t._v("删除评论")])],1)])})],2)},aa=[],sa={data:function(){return{reportList:[]}},methods:{getReportList:function(){var t=this;this.axios.get("/getRepotedComment").then(function(e){1==e.data.code&&(t.reportList=e.data.data)}).catch(function(e){console.log(e),t.$message("服务器无法连接")})},banUser:function(t){var e=this;this.$confirm("您确定要禁言该用户吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.get("/managerUser?id="+t+"&action=ban").then(function(t){1==t.data.code&&e.$message({type:"success",message:"操作成功!"})}).catch(function(t){console.log(t),e.$message("服务器无法连接")})}).catch(function(){e.$message({type:"info",message:"操作已取消"})})},deleteComment:function(t){var e=this;this.$confirm("您确定要删除该评论吗?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){e.axios.get("/deleteComment?id="+t).then(function(t){1==t.data.code&&(e.getReportList(),e.$message({type:"success",message:"删除成功!"}))}).catch(function(t){console.log(t),e.$message("服务器无法连接")})}).catch(function(){e.$message({type:"info",message:"操作已取消"})})}},mounted:function(){this.getReportList()}},na=sa,ia=(a("647d"),Object(d["a"])(na,ea,aa,!1,null,"fbf37002",null)),oa=ia.exports,ca=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{attrs:{id:"feedback"}},[a("h4",[t._v("反馈列表")]),t._l(t.data,function(e){return a("div",{key:e.id,staticClass:"feedback_card"},[a("div",{staticClass:"content"},[t._v(t._s(e.content))]),a("hr"),a("div",{staticClass:"btn_box"},[a("a",{staticClass:"btn btn-light",attrs:{role:"button",href:"mailto:"+e.email}},[t._v("邮件回复该用户")])])])})],2)},ra=[],la={data:function(){return{data:[{id:1,content:"举报内容",email:"641411169@qq.com"},{id:2,content:"举报内容",email:"641411169@qq.com"}]}},methods:{getData:function(){var t=this;this.axios.get("/getFeedback").then(function(e){1==e.data.code&&(t.data=e.data.data)}).catch(function(e){console.log(e),t.$message("服务器无法连接")})}},mounted:function(){this.getData()}},da=la,ua=(a("878b"),Object(d["a"])(da,ca,ra,!1,null,"5e14be7c",null)),ma=ua.exports;i["default"].use(f["a"]);var fa=new f["a"]({routes:[{path:"*",name:"noFound",component:_},{path:"/",redirect:"/home"},{path:"/editor",name:"editor",component:Ut,children:[{path:"createNovel",component:Vt},{path:"novelManager",component:Xt},{path:"income",component:ae},{path:"addChapter/:id",component:ue},{path:"draft",component:ge},{path:"draft/:id",component:ke}]},{path:"/home",name:"home",component:j,redirect:"/home/newPublish",children:[{path:"newPublish",component:T},{path:"search",component:U},{path:"ranking",component:V},{path:"recommend",component:X},{path:"customerService",component:at}]},{path:"/novel/:id",name:"novel",component:Oe},{path:"/novel/:novelId/:chapter",name:"chapter",component:ze},{path:"/user",name:"user",component:rt,redirect:"/user/collection",children:[{path:"collection",component:vt},{path:"info",component:Ct},{path:"recharge",component:wt},{path:"bought",component:Tt}]},{path:"/admin",name:"admin",component:qe,redirect:"/admin/userList",children:[{path:"userList",component:Je},{path:"novelList",component:ta},{path:"reportList",component:oa},{path:"feedback",component:ma}]}]}),va=a("2f62");i["default"].use(va["a"]);var ha=new va["a"].Store({state:{account:"",name:"",identity:"",vp:"",ban:"",uid:""},mutations:{setData:function(t,e){for(var a in e)t[a]=e[a]}},actions:{}}),pa=a("bc3a"),ga=a.n(pa),ba=a("a7fe"),_a=a.n(ba),Ca=a("c1df"),ya=a.n(Ca),$a=a("5c96"),xa=a.n($a);a("0fae");i["default"].use(xa.a);var ka=a("4430");a("4989"),a("41e6"),a("ab8b");i["default"].use(_a.a,ga.a),ga.a.defaults.baseURL=ka["a"].host,ga.a.defaults.headers.common["Authorization"]=localStorage.getItem("token"),i["default"].filter("introduction",function(t){return t.length>50?t.substring(0,51)+" ......":t}),i["default"].filter("dateFormat",function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"YYYY-MM-DD HH:mm:ss";return ya()(n()(t)).format(e)}),i["default"].filter("identity",function(t){switch(t){case"editor":return"作者";case"reader":return"读者";case"admin":return"管理员"}}),i["default"].filter("arr",function(t){return t=t.toString(),t=t.replace("[","").replace("]",""),t}),i["default"].prototype.COMMON=ka["a"],new i["default"]({router:fa,store:ha,render:function(t){return t(m)}}).$mount("#app"),i["default"].config.productionTip=!1},"5a07":function(t,e,a){},"5c64":function(t,e,a){"use strict";var s=a("c2ae"),n=a.n(s);n.a},"5d10":function(t,e,a){"use strict";(function(t){function a(){t(".card-img-top").each(function(){""==t(this).attr("src")&&(t(this).css("display","none"),t(this).prev().css("display","block"))})}var s="http://localhost:8080/api/nov/",n="/login.html";e["a"]={renderNoCover:a,login_location:n,host:s}}).call(this,a("1157"))},"647d":function(t,e,a){"use strict";var s=a("6833"),n=a.n(s);n.a},"64b9":function(t,e,a){"use strict";var s=a("ee43"),n=a.n(s);n.a},"64c2":function(t,e,a){},"665d":function(t,e,a){},"666c":function(t,e,a){},6833:function(t,e,a){},"68f5":function(t,e,a){},"6e11":function(t,e,a){},7035:function(t,e,a){},"72fb":function(t,e,a){"use strict";var s=a("68f5"),n=a.n(s);n.a},"765d":function(t,e,a){},"78c7":function(t,e,a){"use strict";var s=a("fd09"),n=a.n(s);n.a},"7f45":function(t,e,a){"use strict";var s=a("64c2"),n=a.n(s);n.a},"7f86":function(t,e,a){"use strict";var s=a("0d1a"),n=a.n(s);n.a},"810c":function(t,e,a){"use strict";var s=a("184d"),n=a.n(s);n.a},8247:function(t,e,a){},"878b":function(t,e,a){"use strict";var s=a("8247"),n=a.n(s);n.a},"879b":function(t,e,a){"use strict";var s=a("40d1"),n=a.n(s);n.a},"897f":function(t,e,a){},a001:function(t,e,a){},a382:function(t,e,a){"use strict";var s=a("665d"),n=a.n(s);n.a},b3b9:function(t,e,a){"use strict";var s=a("df00"),n=a.n(s);n.a},b78d:function(t,e,a){"use strict";var s=a("7035"),n=a.n(s);n.a},b845:function(t,e,a){},ba23:function(t,e,a){},bd0a:function(t,e,a){},bd46:function(t,e,a){"use strict";var s=a("ce40"),n=a.n(s);n.a},be93:function(t,e,a){"use strict";var s=a("ba23"),n=a.n(s);n.a},c0fb:function(t,e,a){"use strict";var s=a("41d1"),n=a.n(s);n.a},c2ae:function(t,e,a){},ce40:function(t,e,a){},cfa2:function(t,e,a){},d258:function(t,e,a){},d6ef:function(t,e,a){"use strict";var s=a("6e11"),n=a.n(s);n.a},db0d:function(t,e,a){"use strict";var s=a("bd0a"),n=a.n(s);n.a},de8e:function(t,e,a){"use strict";(function(t){e["a"]={data:function(){return{data:[]}},methods:{changeNav:function(){t(".nav-link").click(function(){t(".nav-link").each(function(){t(this).removeClass("active")}),t(this).addClass("active")})},logout:function(){localStorage.clear(),window.location.href=this.COMMON.login_location}},mounted:function(){this.changeNav()}}}).call(this,a("1157"))},df00:function(t,e,a){},e0d6:function(t,e,a){"use strict";var s=a("03b5"),n=a.n(s);n.a},ee43:function(t,e,a){},fc9e:function(t,e,a){"use strict";var s=a("765d"),n=a.n(s);n.a},fd09:function(t,e,a){}});