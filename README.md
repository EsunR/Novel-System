# NOTICE

全局变量在 `./src/common.vue` 中修改
- host：API服务器地址
- login_location：登录页面相对于服务器根目录的地址
- index_location：主页相对于服务器根目录的地址

DEMO：http://www.esunr.xyz/git/NovelStore/login.html#/login

API文档参见`./API_Doc.md` 数据库文档参见`./DataBase_Doc.md`

![](https://img.shields.io/badge/Base-Vue2.2-brightgreen.svg)
![](https://img.shields.io/badge/Build-Vue--Cli3-orange.svg)
![](https://img.shields.io/badge/Design-ElementUI-blue.svg) 
![](https://img.shields.io/badge/Installer-NPM%206.9.0-red.svg)


# 主要需求

### 难点分析
主要面向喜欢网上看书，写小说的人群，提供作者发布连载小说和供读者浏览，同时读者也可以得到与其喜好相符的小说推荐，满足用户的在休闲时刻的精神消费，收费章节需要读者支付vip点才可阅读，收益则是按照比例有网站与作者共同获得。

难点：
- 读者根据喜好推荐
- 收费章节需要支付VIP点
- 收益按照比例，网站与作者共同获得
- 支付宝API


### 用户权限
本项目主要有游客、读者、作者、管理员四个用户，对应的权限依次为1、2、3、4，游客权限最低。
- 游客仅可以阅读免费小说和查询小说，但无充值写作等权限；
- 读者没有写作的权限；
- 作者可以写作和看小说；
- 管理员统筹一切，有所有的权限（重点）。


### 技术要求
本项目为B/S系统。项目前端主要使用jQuery、Bootstrap框架，后台则用整合ssm框架，还使用了阿里云的oss对象存储，支付宝接口，数据库采用mysql。

<br>

# 1. 前台功能

### 1.0 主要功能
注册/登录（忘记密码、记住密码）、小说浏览查询、创建小说、小说上传、小说免费章节在线阅读、收费章节、个人书架、小说下载、小说推荐、小说收藏、小说评论、小说排行榜、推书区、客服、稿酬收入、在线充值vip点、读者权限升级。

### 1.1 注册/登录
- 注册：首先未注册的用户先注册，用户输入用户名等信息，若用户名已存在，则提醒用户用户名已存在并让其重新输入用户名；绑定邮箱并使用邮箱获取验证码，若邮箱已绑定过则提醒用户已存在。
- 登录用户在注册后，在前台输入用户名密码，**前台页面加载时调用生成公钥方法生成公钥， 然用户点击登录时获取用户输入的用户名、密码，根据之前生成的公钥 进行私钥加密，传入后台的数据是已经加过密的数据， 然后我们在后台在进行解密** ，得到用户输入的原始密码，若能在数据库中查询出则返回主页面若不能则提醒用户输入错误。
- 记住密码：用cookie保存用户账号、密码。管理员不需要注册。（500行）
![登录](http://ww1.sinaimg.cn/large/a71efaafly1g15qolqafpj20yq0gsmy7.jpg)
![注册](http://ww1.sinaimg.cn/large/a71efaafly1g15qpqkyh9j20ub0hnwfv.jpg)

### 1.2 小说浏览查询
![](http://ww1.sinaimg.cn/large/a71efaafly1g15qqinjw2j217p0l5b0q.jpg)
- 分类浏览：依据作者上传的文件类型归类，用户点击对应类型，查询出对应的小说形成列表；小说有以下几个分类：
    - 玄幻
    - 奇幻
    - 武侠
    - 仙侠
    - 都市
    - 现实
    - 军事
    - 历史
    - 游戏
    - 科幻
- 小说查询：用户登录进入用户界面，可选择书名或作者，采用关键字查询和模糊匹配搜索相关小说，同时推荐相似的小说。（400行）


### 1.3 小说创建
![](http://ww1.sinaimg.cn/large/a71efaafly1g15qr9d48sj20r80jlq4p.jpg)
作者点击创建作品，跳转到相应的作品创建界面，输入相应的`作品名称`、`类型`、`书籍封面图片`、`标签`、`介绍`等信息；点击创建后将对应的信息上传至云端和数据库及创建成功。


### 1.4 小说上传
![](http://ww1.sinaimg.cn/large/a71efaafly1g15qruwxnnj20q90ihdh6.jpg)
- 作者点击小说上传及进入小说上传界面，选择作品名，输入`章节名`和`章节内容`后上传至云端，同时**保存至临时草稿箱**，为每本书配备一个草稿箱文件夹用于存储临时章节到磁盘，同时在上传时进行检查以确保重复上传相同的文件；
- 用户还可以直接上传本地小说，但仅支持TXT格式，上传时，用户对上传的小说可进行修改和删除。


### 1.5 小说免费章节在线阅读
![](http://ww1.sinaimg.cn/large/a71efaafly1g15qsg46q7j20qm0lfah8.jpg)
用户选择小说后，点击在线阅读按钮即可阅读小说

### 1.6 vip章节阅读
依据字数和用户会员等级扣除用户vip点，用户才能查看该章节已阅读过的章节下次阅读将不再扣除vip点。

### 1.7 小说下载
所有书籍的正文文本存储在阿里云上，而url等信息都采用mysql数据库存储在后台，利用ssm框架实现前台与后台数据库的交互，每本书包括书名、简介等信息。

### 1.8 小说推荐
采用基于协同过滤的推荐算法向用户推荐可能喜欢看的书籍，方便用户寻找喜欢的小说；(按照用户注册时选择的喜好标签来推荐)

### 1.9 小说收藏
![](http://ww1.sinaimg.cn/large/a71efaafly1g15qtkfmesj20q80jp12c.jpg)
用户可以收藏自己喜欢的小说将其存入个人书架。

### 1.10 小说评论
用户选择小说后，可以查看别的用户对这首小说的评论，也可以发表自己的评论，内容存入数据库中,用户也可以删除自己的评论。

### 1.11 小说排行榜
用户进入主界面，可浏览排行榜，排行榜显示`下载量榜`、`阅读量榜`、`评论榜`。可点击排行榜上的小说进入相应的小说信息页面。

### 1.12 推书区(与小说推荐功能重合)
采用基于协同过滤的推荐算法向用户推荐可能喜欢看的小说，方便用户寻找喜欢的小说。

### 1.13 客服问题反馈
读者或作者遇到问题时可以通过客服来咨询所遇到的问题。

用户留下邮箱、以及遇到的问题，发送给后台。

### 1.14 个人书架(与收藏联动)
![](http://ww1.sinaimg.cn/large/a71efaafly1g15quuqfx5j20qb0iegwi.jpg)
用户登陆后点击进入个人书架，可以查看书架中收藏的书籍，点击书籍，显示书籍对应的信息

### 1.15 稿酬收入
当作者签约后，会根据读者支付的vip点来进行计算，基本收入3000+100*(总vip点/10000vip点)

### 1.16 在线充值
通过微信或支付宝接口实现支付功能，读者选择1元=100vip点。

### 1.17 读者权限升级
有写作意向的读者可以升级为作者。

<br>

# 2. 后台管理员功能

主要功能：用户管理、小说管理、评论管理、举报管理、数据统计、小说推荐

### 用户管理
![](http://ww1.sinaimg.cn/large/a71efaafly1g15qvnsswbj20qe0khteh.jpg)
管理员有权限查看读者和作者信息，管理员进入管理员界面，选择用户管理功能查看用户信息，功能主要有`禁言`不良用户、删除用户等。

### 小说管理
管理员进入管理员界面，选择小说管理功能查看小说信息，功能主要有如
- 添加分类标签属性
- 审核小说并删除不良小说

### 评论管理
![](http://ww1.sinaimg.cn/large/a71efaafly1g15qw7egomj20qa0dajt4.jpg)
管理员进入管理员界面，选择评论管理功能查看评论信息，功能主要有如删除不良评论等。

### 举报管理
依据读者反馈的举报信息进行警告封帐号等处罚；

### 数据统计
根据所有账户中的个人书架数据，对每一本小说的收藏总数进行统计并且在实时更新数据库中的收藏数据；

### 小说推荐
管理员根据账户的个人书架反馈的信息向用户书架进行推荐
